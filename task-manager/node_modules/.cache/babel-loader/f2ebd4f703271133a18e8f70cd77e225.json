{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\genhk\\\\OneDrive\\\\Desktop\\\\ellie's\\\\taskm\\\\react-tasks-manager\\\\task-manager\\\\src\\\\Components\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport $ from 'jquery'; // import styled components\n\nimport styled from 'styled-components'; // import bootstrap\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css'; // import Toggle Task Form Button\n\nimport TaskFormToggle from './TaskFormToggle'; //import Sidebar\n\nimport SideBar from './SideBar';\nimport HomePage from './HomePage';\nimport TaskForm from './TaskForm';\nimport ListsPage from './ListsPage';\nimport Main from './Main'; //database\n\nimport { collection, doc, getDocs, addDoc, deleteDoc, updateDoc } from 'firebase/firestore';\nimport { testCollectionRef } from '../db';\nimport { db } from '../firebase-config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Body = styled.div`\n  padding: 0;\n  overflow: hidden;\n`;\nconst MainRow = styled.div`\n  height: 100vh;\n  overflow: hidden\n`;\n_c = MainRow;\n\nfunction App() {\n  _s();\n\n  // const allTasksRef = collection(db, \"task\")\n  // useEffect(() => { \n  //   const createTask = async () => {\n  //     // await addDoc(testCollectionRef, { title: newTask.title , notes: newTask.notes, date: newTask.Date});\n  //     await addDoc(testCollectionRef, {});}\n  //     createTask();\n  // }, [])\n  // state of new task input\n  const [newTask, setNewTask] = useState({});\n  const [allTasks, setAllTasks] = useState(null); // upload to db \n  // const createTask = async () => {\n  //   // await addDoc(testCollectionRef, { title: '1' , notes: \"newTask.notes\", date: \"newTask.Date\"});}\n  //   await addDoc(testCollectionRef, newTask);}\n  //data retrieveal \n\n  useEffect(() => {\n    const getTest = async () => {\n      const data = await getDocs(testCollectionRef);\n      setAllTasksList(data.docs.map(doc => ({ ...doc.data(),\n        id: doc.id\n      })));\n    };\n\n    getTest();\n  }, []);\n  const [allTasksList, setAllTasksList] = useState([]); // lists for dnd\n  // const [list, setList] = useState({})\n  // const [allLists, setAllLists] = useState([])\n\n  const onDragEnd = result => {\n    const {\n      destination,\n      source,\n      draggableId\n    } = result;\n\n    if (!destination) {\n      return;\n    }\n\n    if (destination.droppableId === source.droppableId && destination.index === source.index) {\n      return;\n    }\n\n    const newTaskIds = Array.from(allTasksList);\n    newTaskIds.splice(source.index, 1);\n    newTaskIds.splice(destination.index, 0, draggableId);\n    const newColumn = newTaskIds;\n    setAllTasksList(newColumn);\n    console.log('123');\n  }; // new task form input\n\n\n  const handleChange = _ref => {\n    let {\n      target\n    } = _ref;\n    // insert corresponding name and input as porperty [name] & value in the newTask object\n    const {\n      name,\n      value\n    } = target; // generate id for each task\n\n    const id = Date.now();\n    setNewTask(prevNewTask => ({ ...prevNewTask,\n      [name]: value,\n      id: id,\n      done: false\n    }));\n    console.log(allTasks);\n  }; //submit task\n\n\n  const handleSubmit = event => {\n    // prevent default action\n    // event.preventDefault();\n    // shift new task in all tasks list (before previous task(s))\n    setAllTasks(prevAllTasks => ({ ...prevAllTasks,\n      [newTask.id]: newTask\n    })); // add task id to all tasks list\n\n    setAllTasksList(prev => [...prev, newTask.id]); // empty the value of newTask\n\n    setNewTask({});\n  }; //Remove tasks marked as done\n\n\n  const handleRemoveDone = e => {\n    e.preventDefault();\n    setAllTasksList(allTasksList.filter(task => {\n      //keep tasks haven't been done on list, for later return\n      const taskToKeep = allTasks[task].done === false; // delete task(s) done\n\n      if (allTasks[task].done === true) {\n        delete allTasks[task];\n      }\n\n      return taskToKeep;\n    }));\n  };\n\n  const handleRemoveTask = taskId => {\n    delete allTasks[taskId];\n    setAllTasksList(allTasksList.filter(task => task !== taskId));\n  }; // edit task detail\n\n\n  const handleEditTask = (taskId, content) => {\n    setAllTasks(prevAllTasks => ({ ...prevAllTasks,\n      [taskId]: content\n    }));\n  }; // // toggle task done status\n\n\n  const handleToggleDone = taskId => {\n    setAllTasks(prevAllTasks => ({ ...prevAllTasks,\n      [taskId]: { ...allTasks[taskId],\n        done: !allTasks[taskId].done\n      }\n    }));\n  }; // useEffect(() => {\n  //   await addDoc(testCollectionRef, allTasks);\n  // }, [allTasks])\n  // Toggle add task form\n\n\n  useEffect(() => {\n    $(document).ready(function () {\n      $('#addTask').on(\"click\", function () {\n        $(\"#taskForm\").toggleClass(\"active\");\n        $(\"#addBtn\").toggleClass(\"active\");\n      });\n    });\n  }, []); // fetch local data from local storge on page loaded\n\n  useEffect(() => {\n    if (!allTasks) {\n      // fetch data from local storage\n      const data = localStorage.getItem('testing-task'); // add the parsed data to allTasks\n\n      setAllTasks(JSON.parse(data));\n    }\n  }, []);\n  useEffect(() => {\n    const updateToDoItem = async id => {\n      const testDoc = doc(db, \"allTasks\", id); // const newFields = allTasks\n\n      await updateDoc(testDoc, allTasks);\n    }; // setAllTasks(null)\n\n\n    updateToDoItem('testtask');\n  }, [allTasks]);\n  useEffect(() => {\n    // fetch data from local storage\n    const data = localStorage.getItem('testing-task-list'); // add the parsed data to allTasks\n\n    setAllTasksList(JSON.parse(data));\n  }, []); // store tasks to local storage while adding task\n\n  useEffect(() => {\n    localStorage.setItem('testing-task', JSON.stringify(allTasks));\n  }, [allTasks, allTasksList]);\n  useEffect(() => {\n    localStorage.setItem('testing-task-list', JSON.stringify(allTasksList));\n  }, [allTasksList]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(TaskFormToggle, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid\",\n      style: {\n        padding: 0,\n        overflow: 'hidden'\n      },\n      children: /*#__PURE__*/_jsxDEV(MainRow, {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(SideBar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n          className: \"col\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            style: {\n              height: '100vh'\n            },\n            children: [/*#__PURE__*/_jsxDEV(HomePage, {\n              allTasksList: allTasksList,\n              allTasks: allTasks,\n              handleRemoveDone: handleRemoveDone,\n              onDragEnd: onDragEnd,\n              handleEditTask: handleEditTask,\n              handleToggleDone: handleToggleDone,\n              handleRemoveTask: handleRemoveTask\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListsPage, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TaskForm, {\n          newTask: newTask,\n          handleSubmit: handleSubmit,\n          handleChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 248,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"/3h0JnhO2+qHNwgpnoAQa9wD++8=\");\n\n_c2 = App;\nexport default App;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"MainRow\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"sources":["C:/Users/genhk/OneDrive/Desktop/ellie's/taskm/react-tasks-manager/task-manager/src/Components/App.js"],"names":["useState","useEffect","$","styled","TaskFormToggle","SideBar","HomePage","TaskForm","ListsPage","Main","collection","doc","getDocs","addDoc","deleteDoc","updateDoc","testCollectionRef","db","Body","div","MainRow","App","newTask","setNewTask","allTasks","setAllTasks","getTest","data","setAllTasksList","docs","map","id","allTasksList","onDragEnd","result","destination","source","draggableId","droppableId","index","newTaskIds","Array","from","splice","newColumn","console","log","handleChange","target","name","value","Date","now","prevNewTask","done","handleSubmit","event","prevAllTasks","prev","handleRemoveDone","e","preventDefault","filter","task","taskToKeep","handleRemoveTask","taskId","handleEditTask","content","handleToggleDone","document","ready","on","toggleClass","localStorage","getItem","JSON","parse","updateToDoItem","testDoc","setItem","stringify","padding","overflow","height"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\r\n\r\nimport $ from 'jquery';\r\n\r\n// import styled components\r\nimport styled from'styled-components';\r\n// import bootstrap\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nimport './App.css';\r\n\r\n\r\n// import Toggle Task Form Button\r\nimport TaskFormToggle from './TaskFormToggle';\r\n\r\n//import Sidebar\r\nimport SideBar from './SideBar';\r\nimport HomePage from './HomePage';\r\nimport TaskForm from './TaskForm';\r\nimport ListsPage from './ListsPage';\r\n\r\nimport Main from './Main';\r\n\r\n//database\r\nimport { collection, doc, getDocs, addDoc, deleteDoc, updateDoc } from 'firebase/firestore'\r\nimport {testCollectionRef} from '../db'\r\nimport { db } from '../firebase-config';\r\n\r\n\r\n\r\nconst Body = styled.div`\r\n  padding: 0;\r\n  overflow: hidden;\r\n`\r\n\r\nconst MainRow = styled.div`\r\n  height: 100vh;\r\n  overflow: hidden\r\n`\r\n\r\n\r\n\r\nfunction App() {\r\n// const allTasksRef = collection(db, \"task\")\r\n\r\n\r\n\r\n\r\n// useEffect(() => { \r\n//   const createTask = async () => {\r\n//     // await addDoc(testCollectionRef, { title: newTask.title , notes: newTask.notes, date: newTask.Date});\r\n    \r\n//     await addDoc(testCollectionRef, {});}\r\n//     createTask();\r\n// }, [])\r\n\r\n\r\n\t// state of new task input\r\n\tconst [newTask, setNewTask] = useState({});\r\n  const [allTasks, setAllTasks] = useState(null);\r\n\r\n    // upload to db \r\n    // const createTask = async () => {\r\n    //   // await addDoc(testCollectionRef, { title: '1' , notes: \"newTask.notes\", date: \"newTask.Date\"});}\r\n    //   await addDoc(testCollectionRef, newTask);}\r\n\r\n    //data retrieveal \r\n    useEffect(() => {\r\n      const getTest = async () => {\r\n          const data = await getDocs(testCollectionRef);\r\n          setAllTasksList(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })))\r\n      }\r\n      getTest();\r\n  }, [])\r\n\r\n\r\n  const [allTasksList, setAllTasksList] = useState([])\r\n\r\n  // lists for dnd\r\n  // const [list, setList] = useState({})\r\n  // const [allLists, setAllLists] = useState([])\r\n\r\n  const onDragEnd = result => {\r\n    const { destination, source, draggableId } = result;\r\n\r\n    if(!destination) {\r\n        return;\r\n    }\r\n\r\n    if (\r\n        destination.droppableId === source.droppableId &&\r\n        destination.index === source.index\r\n    ) {\r\n        return;\r\n    }\r\n\r\n    const newTaskIds = Array.from(allTasksList);\r\n\r\n    newTaskIds.splice(source.index, 1);\r\n    newTaskIds.splice(destination.index, 0, draggableId);\r\n\r\n    const newColumn = newTaskIds;\r\n\r\n    setAllTasksList(newColumn);\r\n    console.log('123')\r\n}\r\n\r\n  // new task form input\r\n\tconst handleChange = ({ target }) => {\r\n\t\t// insert corresponding name and input as porperty [name] & value in the newTask object\r\n\t\tconst { name, value } = target;\r\n    // generate id for each task\r\n    const id = Date.now();\r\n\r\n\t\tsetNewTask((prevNewTask) => ({\r\n\t\t\t...prevNewTask,\r\n        [name]: value,\r\n        id: id,\r\n        done: false,\r\n\t\t})\r\n\t\t);\r\n\r\n    console.log(allTasks)\r\n\t};\r\n\r\n  //submit task\r\n\tconst handleSubmit = (event) => {\r\n\t\t// prevent default action\r\n\t\t// event.preventDefault();\r\n\r\n\t\t\t// shift new task in all tasks list (before previous task(s))\r\n\t\t\tsetAllTasks((prevAllTasks) => ({\r\n\t\t\t\t...prevAllTasks,\r\n        [newTask.id]: newTask,\r\n      })\r\n\t\t\t);\r\n\r\n      // add task id to all tasks list\r\n      setAllTasksList((prev) => ([\r\n        ...prev,\r\n        newTask.id\r\n      ]))\r\n\r\n\t\t\t// empty the value of newTask\r\n\t\t\tsetNewTask({});\r\n\t}\r\n  \r\n\r\n  //Remove tasks marked as done\r\n  const handleRemoveDone = e => {\r\n\t\te.preventDefault();\r\n    setAllTasksList(allTasksList.filter(task => \r\n      { \r\n        //keep tasks haven't been done on list, for later return\r\n        const taskToKeep = allTasks[task].done === false;\r\n\r\n        // delete task(s) done\r\n        if(allTasks[task].done === true) {\r\n          delete allTasks[task]\r\n        }\r\n        return taskToKeep\r\n      }\r\n      ))\r\n      ;\r\n  }\r\n\r\n  const handleRemoveTask = taskId => {\r\n    delete allTasks[taskId]\r\n    setAllTasksList(allTasksList.filter(task => task !== taskId))\r\n  }\r\n\r\n  // edit task detail\r\n  const handleEditTask = (taskId, content) => {\r\n    setAllTasks(prevAllTasks => ({\r\n      ...prevAllTasks,\r\n      [taskId]: content\r\n    }))\r\n  }\r\n\r\n  // // toggle task done status\r\n  const handleToggleDone = (taskId) => {\r\n      setAllTasks(prevAllTasks => ({\r\n        ...prevAllTasks,\r\n        [taskId]: {\r\n          ...allTasks[taskId],\r\n          done: !allTasks[taskId].done\r\n        }\r\n      }))\r\n  }\r\n\r\n  // useEffect(() => {\r\n  //   await addDoc(testCollectionRef, allTasks);\r\n  // }, [allTasks])\r\n\r\n  // Toggle add task form\r\n  useEffect(() => {\r\n    $(document).ready(function() {\r\n      $('#addTask').on(\"click\", function() {\r\n          $(\"#taskForm\").toggleClass(\"active\");\r\n          $(\"#addBtn\").toggleClass(\"active\");\r\n      })\r\n  })\r\n  },[])\r\n\r\n\r\n  // fetch local data from local storge on page loaded\r\n  useEffect(() => {\r\n    if(!allTasks) {\r\n      // fetch data from local storage\r\n      const data = localStorage.getItem('testing-task');\r\n      // add the parsed data to allTasks\r\n      setAllTasks(JSON.parse(data));\r\n    }\r\n  }, [])\r\n\r\nuseEffect(() => {\r\n  const updateToDoItem = async (id) => {\r\n    const testDoc = doc(db, \"allTasks\", id)\r\n    // const newFields = allTasks\r\n    await updateDoc(testDoc, allTasks)\r\n}\r\n// setAllTasks(null)\r\nupdateToDoItem('testtask')\r\n}, [allTasks])\r\n\r\n  useEffect(() => {\r\n      // fetch data from local storage\r\n      const data = localStorage.getItem('testing-task-list');\r\n      // add the parsed data to allTasks\r\n      setAllTasksList(JSON.parse(data));\r\n  }, [])\r\n\r\n    // store tasks to local storage while adding task\r\n\tuseEffect(() => {\r\n\t\tlocalStorage.setItem('testing-task', JSON.stringify(allTasks))\r\n\t}, [allTasks, allTasksList])\r\n\r\n\tuseEffect(() => {\r\n\t\tlocalStorage.setItem('testing-task-list', JSON.stringify(allTasksList))\r\n\t}, [allTasksList])\r\n\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <TaskFormToggle />\r\n      <div className='container-fluid' style={{padding: 0, overflow: 'hidden'}}>\r\n        <MainRow className='row'>\r\n          <SideBar />\r\n\r\n\r\n          {/* <Main /> */}\r\n          <main className=\"col\">\r\n            <div className=\"row\" style={{height: '100vh'}}>\r\n\r\n              <HomePage\r\n                allTasksList={allTasksList}\r\n                allTasks={allTasks}\r\n                handleRemoveDone={handleRemoveDone}\r\n                onDragEnd={onDragEnd}\r\n                handleEditTask={handleEditTask}\r\n                handleToggleDone={handleToggleDone}\r\n                handleRemoveTask={handleRemoveTask}\r\n                />\r\n\r\n              <ListsPage />\r\n\r\n\r\n            </div>\r\n\r\n          </main>\r\n\r\n          <TaskForm\r\n            newTask={newTask}\r\n            handleSubmit={handleSubmit}\r\n            handleChange={handleChange}\r\n          />\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        </MainRow>\r\n\r\n        \r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}